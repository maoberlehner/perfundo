!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.perfundo=e()}(this,function(){"use strict";function t(t,e,n){return Object.keys(n).reduce(function(o,i){var s=t.getAttribute("data-"+i.toLowerCase());return o[i]=s||e[i]||n[i],o},{})}function e(t,n){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.configure,r=t.context,c=t.defaultOptions,a=t.swipe,u="string"==typeof n?r.querySelectorAll(n):n;return u.length>1?[].slice.call(u).map(function(n){return new e(t,n,i)}):(this.context=r,this.element=u[0]||u,this.options=s(this.element,i,c),this.element.setAttribute(this.options.rootAttribute,!0),this.options.disableHistory&&this.element.addEventListener("click",function(t){t.preventDefault();var e=t.target.classList.contains(o.options.classNames.close)||t.target.classList.contains(o.options.classNames.overlay),n=t.target.classList.contains(o.options.classNames.link)||t.target.parentElement.classList.contains(o.options.classNames.link);e?o.close():n?o.open():t.target.classList.contains(o.options.classNames.prev)?o.prev():t.target.classList.contains(o.options.classNames.next)&&o.next()}),this.options.swipe&&a(this.element,{wipeLeft:function(){return o.next()},wipeRight:function(){return o.prev()},preventDefaultEvents:this.options.disableHistory}),this)}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(e,n){t.exports=n()}(0,function(){function t(t,e){return void 0!==t?t:e}return function(e,n){function o(){e.removeEventListener("touchmove",i),r=null,u=!1}function i(t){if(a.preventDefaultEvents&&t.preventDefault(),u){var e=t.touches[0].pageX,n=t.touches[0].pageY,i=r-e,s=c-n;Math.abs(i)>=a.min_move_x?(o(),i>0?a.wipeLeft(t):a.wipeRight(t)):Math.abs(s)>=a.min_move_y&&(o(),s>0?a.wipeDown(t):a.wipeUp(t))}}function s(t){1===t.touches.length&&(r=t.touches[0].pageX,c=t.touches[0].pageY,u=!0,e.addEventListener("touchmove",i))}var r,c,a={min_move_x:t((n=n||{}).min_move_x,20),min_move_y:t(n.min_move_y,20),wipeLeft:n.wipeLeft||function(){},wipeRight:n.wipeRight||function(){},wipeUp:n.wipeUp||function(){},wipeDown:n.wipeDown||function(){},preventDefaultEvents:t(n.preventDefaultEvents,!0)},u=!1;return e.addEventListener("touchstart",s),{unbind:function(){e.removeEventListener("touchstart",s)}}}})}),o={disableHistory:!1,swipe:!0,rootAttribute:"data-perfundo",classNames:{link:"perfundo__link",overlay:"perfundo__overlay",content:"perfundo__content",close:"perfundo__close",prev:"perfundo__prev",next:"perfundo__next",untarget:"perfundo__untarget",active:"is-active"}};e.prototype.open=function(){this.element.querySelector("."+this.options.classNames.overlay).classList.add(this.options.classNames.active)},e.prototype.close=function(){this.element.querySelector("."+this.options.classNames.overlay).classList.remove(this.options.classNames.active)},e.prototype.prev=function(){try{var t=this.element.querySelector("."+this.options.classNames.prev),e=this.context.querySelector(""+t.getAttribute("href")),n=this.getRootElement(e);n&&(this.close(),n.querySelector("."+this.options.classNames.link).click())}catch(t){throw new Error("Previous item not found.")}},e.prototype.next=function(){try{var t=this.element.querySelector("."+this.options.classNames.next),e=this.context.querySelector(""+t.getAttribute("href")),n=this.getRootElement(e);n&&(this.close(),n.querySelector("."+this.options.classNames.link).click())}catch(t){throw new Error("Next item not found.")}},e.prototype.getRootElement=function(t){for(var e=t.parentElement;e&&e!==this.context;){if(e.hasAttribute(this.options.rootAttribute))return e;e=e.parentElement}return null};return function(i,s){return new e({configure:t,context:arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,defaultOptions:o,swipe:n},i,s)}});